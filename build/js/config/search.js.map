{"version":3,"names":[],"mappings":"","sources":["js/config/search.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nconst MEDUSA = require('../core');\nMEDUSA.config.search = function () {\n    $('#config-components').tabs();\n    $('#nzb_dir').fileBrowser({ title: 'Select .nzb black hole/watch location' });\n    $('#torrent_dir').fileBrowser({ title: 'Select .torrent black hole/watch location' });\n    $('#torrent_path').fileBrowser({ title: 'Select .torrent download location' });\n    $('#torrent_seed_location').fileBrowser({ title: 'Select Post-Processed seeding torrents location' });\n\n    $.fn.nzbMethodHandler = function () {\n        var selectedProvider = $('#nzb_method :selected').val();\n        var blackholeSettings = '#blackhole_settings';\n        var sabnzbdSettings = '#sabnzbd_settings';\n        var testSABnzbd = '#testSABnzbd';\n        var testSABnzbdResult = '#testSABnzbd_result';\n        var testNZBget = '#testNZBget';\n        var testNZBgetResult = '#testNZBgetResult';\n        var nzbgetSettings = '#nzbget_settings';\n\n        $('#nzb_method_icon').removeClass(function (index, css) {\n            return (css.match(/(^|\\s)add-client-icon-\\S+/g) || []).join(' ');\n        });\n        $('#nzb_method_icon').addClass('add-client-icon-' + selectedProvider.replace('_', '-'));\n\n        $(blackholeSettings).hide();\n        $(sabnzbdSettings).hide();\n        $(testSABnzbd).hide();\n        $(testSABnzbdResult).hide();\n        $(nzbgetSettings).hide();\n        $(testNZBget).hide();\n        $(testNZBgetResult).hide();\n\n        if (selectedProvider.toLowerCase() === 'blackhole') {\n            $(blackholeSettings).show();\n        } else if (selectedProvider.toLowerCase() === 'nzbget') {\n            $(nzbgetSettings).show();\n            $(testNZBget).show();\n            $(testNZBgetResult).show();\n        } else {\n            $(sabnzbdSettings).show();\n            $(testSABnzbd).show();\n            $(testSABnzbdResult).show();\n        }\n    };\n\n    $.torrentMethodHandler = function () {\n        $('#options_torrent_clients').hide();\n        $('#options_torrent_blackhole').hide();\n\n        var selectedProvider = $('#torrent_method :selected').val();\n        var host = ' host:port';\n        var username = ' username';\n        var password = ' password';\n        var client = '';\n        var optionPanel = '#options_torrent_blackhole';\n        var rpcurl = ' RPC URL';\n\n        $('#torrent_method_icon').removeClass(function (index, css) {\n            return (css.match(/(^|\\s)add-client-icon-\\S+/g) || []).join(' ');\n        });\n        $('#torrent_method_icon').addClass('add-client-icon-' + selectedProvider.replace('_', '-'));\n\n        if (selectedProvider.toLowerCase() !== 'blackhole') {\n            $('#label_warning_deluge').hide();\n            $('#label_anime_warning_deluge').hide();\n            $('#host_desc_torrent').show();\n            $('#torrent_verify_cert_option').hide();\n            $('#torrent_verify_deluge').hide();\n            $('#torrent_verify_rtorrent').hide();\n            $('#torrent_auth_type_option').hide();\n            $('#torrent_path_option').show();\n            $('#torrent_path_option').find('.fileBrowser').show();\n            $('#torrent_seed_location_option').hide();\n            $('#torrent_seed_time_option').hide();\n            $('#torrent_high_bandwidth_option').hide();\n            $('#torrent_label_option').show();\n            $('#torrent_label_anime_option').show();\n            $('#path_synology').hide();\n            $('#torrent_paused_option').show();\n            $('#torrent_rpcurl_option').hide();\n\n            if (selectedProvider.toLowerCase() === 'utorrent') {\n                client = 'uTorrent';\n                $('#torrent_path_option').hide();\n                $('#torrent_seed_time_label').text('Minimum seeding time is');\n                $('#torrent_seed_time_option').show();\n                $('#host_desc_torrent').text('URL to your uTorrent client (e.g. http://localhost:8000)');\n                $('#torrent_seed_location_option').hide();\n            } else if (selectedProvider.toLowerCase() === 'transmission') {\n                client = 'Transmission';\n                $('#torrent_seed_time_label').text('Stop seeding when inactive for');\n                $('#torrent_seed_time_option').show();\n                $('#torrent_high_bandwidth_option').show();\n                $('#torrent_label_option').hide();\n                $('#torrent_label_anime_option').hide();\n                $('#torrent_rpcurl_option').show();\n                $('#host_desc_torrent').text('URL to your Transmission client (e.g. http://localhost:9091)');\n                $('#torrent_seed_location_option').show();\n            } else if (selectedProvider.toLowerCase() === 'deluge') {\n                client = 'Deluge';\n                $('#torrent_verify_cert_option').show();\n                $('#torrent_verify_deluge').show();\n                $('#torrent_verify_rtorrent').hide();\n                $('#label_warning_deluge').show();\n                $('#label_anime_warning_deluge').show();\n                $('#torrent_username_option').hide();\n                $('#torrent_username').prop('value', '');\n                $('#host_desc_torrent').text('URL to your Deluge client (e.g. http://localhost:8112)');\n                $('#torrent_seed_location_option').show();\n            } else if (selectedProvider.toLowerCase() === 'deluged') {\n                client = 'Deluge';\n                $('#torrent_verify_cert_option').hide();\n                $('#torrent_verify_deluge').hide();\n                $('#torrent_verify_rtorrent').hide();\n                $('#label_warning_deluge').show();\n                $('#label_anime_warning_deluge').show();\n                $('#torrent_username_option').show();\n                $('#host_desc_torrent').text('IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)');\n                $('#torrent_seed_location_option').show();\n            } else if (selectedProvider.toLowerCase() === 'download_station') {\n                client = 'Synology DS';\n                $('#torrent_label_option').hide();\n                $('#torrent_label_anime_option').hide();\n                $('#torrent_paused_option').hide();\n                $('#torrent_path_option').find('.fileBrowser').hide();\n                $('#host_desc_torrent').text('URL to your Synology DS client (e.g. http://localhost:5000)');\n                $('#path_synology').show();\n                $('#torrent_seed_location_option').hide();\n            } else if (selectedProvider.toLowerCase() === 'rtorrent') {\n                client = 'rTorrent';\n                $('#torrent_paused_option').hide();\n                $('#host_desc_torrent').text('URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)');\n                $('#torrent_verify_cert_option').show();\n                $('#torrent_verify_deluge').hide();\n                $('#torrent_verify_rtorrent').show();\n                $('#torrent_auth_type_option').show();\n                $('#torrent_seed_location_option').hide();\n            } else if (selectedProvider.toLowerCase() === 'qbittorrent') {\n                client = 'qbittorrent';\n                $('#torrent_path_option').hide();\n                $('#label_warning_qbittorrent').show();\n                $('#label_anime_warning_qbittorrent').show();\n                $('#host_desc_torrent').text('URL to your qbittorrent client (e.g. http://localhost:8080)');\n                $('#torrent_seed_location_option').hide();\n            } else if (selectedProvider.toLowerCase() === 'mlnet') {\n                client = 'mlnet';\n                $('#torrent_path_option').hide();\n                $('#torrent_label_option').hide();\n                $('#torrent_verify_cert_option').hide();\n                $('#torrent_verify_deluge').hide();\n                $('#torrent_verify_rtorrent').hide();\n                $('#torrent_label_anime_option').hide();\n                $('#torrent_paused_option').hide();\n                $('#host_desc_torrent').text('URL to your MLDonkey (e.g. http://localhost:4080)');\n                $('#torrent_seed_location_option').hide();\n            }\n            $('#host_title').text(client + host);\n            $('#username_title').text(client + username);\n            $('#password_title').text(client + password);\n            $('#torrent_client, #torrent_client_seed_path').text(client);\n            $('#rpcurl_title').text(client + rpcurl);\n            optionPanel = '#options_torrent_clients';\n        }\n        $(optionPanel).show();\n    };\n\n    $('#torrent_host').on('input', function () {\n        if ($('#torrent_method :selected').val().toLowerCase() === 'rtorrent') {\n            var hostname = $('#torrent_host').val();\n            var isMatch = hostname.substr(0, 7) === 'scgi://';\n\n            if (isMatch) {\n                $('#torrent_username_option').hide();\n                $('#torrent_username').prop('value', '');\n                $('#torrent_password_option').hide();\n                $('#torrent_password').prop('value', '');\n                $('#torrent_auth_type_option').hide();\n                $('#torrent_auth_type option[value=none]').prop('selected', true);\n            } else {\n                $('#torrent_username_option').show();\n                $('#torrent_password_option').show();\n                $('#torrent_auth_type_option').show();\n            }\n        }\n    });\n\n    $('#nzb_method').on('change', $(this).nzbMethodHandler);\n\n    $(this).nzbMethodHandler();\n\n    $('#testSABnzbd').on('click', function () {\n        var sab = {};\n        $('#testSABnzbd_result').html(MEDUSA.config.loading);\n        sab.host = $('#sab_host').val();\n        sab.username = $('#sab_username').val();\n        sab.password = $('#sab_password').val();\n        sab.apiKey = $('#sab_apikey').val();\n\n        $.get('home/testSABnzbd', {\n            host: sab.host,\n            username: sab.username,\n            password: sab.password,\n            apikey: sab.apiKey\n        }, function (data) {\n            $('#testSABnzbd_result').html(data);\n        });\n    });\n\n    $('#testNZBget').on('click', function () {\n        var nzbget = {};\n        $('#testNZBget_result').html(MEDUSA.config.loading);\n        nzbget.host = $('#nzbget_host').val();\n        nzbget.username = $('#nzbget_username').val();\n        nzbget.password = $('#nzbget_password').val();\n        nzbget.useHttps = $('#nzbget_use_https').prop('checked');\n\n        $.get('home/testNZBget', {\n            host: nzbget.host,\n            username: nzbget.username,\n            password: nzbget.password,\n            use_https: nzbget.useHttps // eslint-disable-line camelcase\n        }, function (data) {\n            $('#testNZBget_result').html(data);\n        });\n    });\n\n    $('#torrent_method').on('change', $.torrentMethodHandler);\n\n    $.torrentMethodHandler();\n\n    $('#test_torrent').on('click', function () {\n        var torrent = {};\n        $('#test_torrent_result').html(MEDUSA.config.loading);\n        torrent.method = $('#torrent_method :selected').val();\n        torrent.host = $('#torrent_host').val();\n        torrent.username = $('#torrent_username').val();\n        torrent.password = $('#torrent_password').val();\n\n        $.get('home/testTorrent', {\n            torrent_method: torrent.method, // eslint-disable-line camelcase\n            host: torrent.host,\n            username: torrent.username,\n            password: torrent.password\n        }, function (data) {\n            $('#test_torrent_result').html(data);\n        });\n    });\n};\n\n},{\"../core\":2}],2:[function(require,module,exports){\n// eslint-disable-line max-lines\n// @TODO Move these into common.ini when possible,\n//       currently we can't do that as browser.js and a few others need it before this is loaded\nvar topImageHtml = '<img src=\"images/top.gif\" width=\"31\" height=\"11\" alt=\"Jump to top\" />'; // eslint-disable-line no-unused-vars\nvar apiRoot = $('body').attr('api-root');\nvar apiKey = $('body').attr('api-key');\n\nvar MEDUSA = {\n    common: {},\n    config: {},\n    home: {},\n    manage: {},\n    history: {},\n    errorlogs: {},\n    schedule: {},\n    addShows: {}\n};\n\nvar UTIL = {\n    exec: function (controller, action) {\n        var ns = MEDUSA;\n        action = action === undefined ? 'init' : action;\n\n        if (controller !== '' && ns[controller] && typeof ns[controller][action] === 'function') {\n            ns[controller][action]();\n        }\n    },\n    init: function () {\n        if (typeof startVue === 'function') {\n            // eslint-disable-line no-undef\n            startVue(); // eslint-disable-line no-undef\n        } else {\n            $('[v-cloak]').removeAttr('v-cloak');\n        }\n\n        var body = document.body;\n        $('[asset]').each(function () {\n            let asset = $(this).attr('asset');\n            let series = $(this).attr('series');\n            let path = apiRoot + 'series/' + series + '/asset/' + asset + '?api_key=' + apiKey;\n            if (this.tagName.toLowerCase() === 'img') {\n                if ($(this).attr('lazy') === 'on') {\n                    $(this).attr('data-original', path);\n                } else {\n                    $(this).attr('src', path);\n                }\n            }\n            if (this.tagName.toLowerCase() === 'a') {\n                $(this).attr('href', path);\n            }\n        });\n        var controller = body.getAttribute('data-controller');\n        var action = body.getAttribute('data-action');\n\n        UTIL.exec('common');\n        UTIL.exec(controller);\n        UTIL.exec(controller, action);\n    }\n};\n\n$.extend({\n    isMeta: function (pyVar, result) {\n        // eslint-disable-line no-unused-vars\n        var reg = new RegExp(result.length > 1 ? result.join('|') : result);\n\n        if (typeof pyVar === 'object' && Object.keys(pyVar).length === 1) {\n            return reg.test(MEDUSA.config[Object.keys(pyVar)[0]][pyVar[Object.keys(pyVar)[0]]]);\n        }\n        if (pyVar.match('medusa')) {\n            pyVar.split('.')[1].toLowerCase().replace(/(_\\w)/g, function (m) {\n                return m[1].toUpperCase();\n            });\n        }\n        return reg.test(MEDUSA.config[pyVar]);\n    }\n});\n\n$.fn.extend({\n    addRemoveWarningClass: function (_) {\n        if (_) {\n            return $(this).removeClass('warning');\n        }\n        return $(this).addClass('warning');\n    }\n});\n\nvar triggerConfigLoaded = function () {\n    // Create the event.\n    var event = new CustomEvent('build', { detail: 'medusa config loaded' });\n    event.initEvent('build', true, true);\n    // Trigger the event.\n    document.dispatchEvent(event);\n};\n\nif (!document.location.pathname.endsWith('/login/')) {\n    api.get('config/main').then(function (response) {\n        log.setDefaultLevel('trace');\n        $.extend(MEDUSA.config, response.data);\n        MEDUSA.config.themeSpinner = MEDUSA.config.themeName === 'dark' ? '-dark' : '';\n        MEDUSA.config.loading = '<img src=\"images/loading16' + MEDUSA.config.themeSpinner + '.gif\" height=\"16\" width=\"16\" />';\n\n        if (navigator.userAgent.indexOf('PhantomJS') === -1) {\n            $(document).ready(UTIL.init);\n        }\n        triggerConfigLoaded();\n    }).catch(function (err) {\n        log.error(err);\n        alert('Unable to connect to Medusa!'); // eslint-disable-line no-alert\n    });\n}\n\nmodule.exports = MEDUSA;\n\n},{}]},{},[1]);\n"],"file":"search.js"}