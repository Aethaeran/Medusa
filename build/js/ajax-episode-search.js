!function e(a,t,r){function s(i,n){if(!t[i]){if(!a[i]){var c="function"==typeof require&&require;if(!n&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var p=t[i]={exports:{}};a[i][0].call(p.exports,function(e){var t=a[i][1][e];return s(t||e)},p,p.exports,e,a,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,a,t){let r=!1,s=!1,o="";PNotify.prototype.options.maxonscreen=5,$.fn.forcedSearches=[];const i=e=>{e.on("click.disabled",!1),e.prop("enableClick","1"),e.fadeTo("fast",1)},n=e=>{e.off("click.disabled"),e.prop("enableClick","0"),e.fadeTo("fast",.5)},c=()=>{const e=$("#series-id").val(),a=void 0===e?"home/getManualSearchStatus":"home/getManualSearchStatus?show="+e;let t=5e3;$.ajax({url:a,error(){t=3e4},type:"GET",dataType:"JSON",complete(){setTimeout(c,t)},timeout:15e3}).done(e=>{t=e.episodes?5e3:15e3,(e=>{$.each(e.episodes,(e,a)=>{let t="";const r=$("a[id="+a.show+"x"+a.season+"x"+a.episode+"]"),s=r.children("img[data-ep-search]"),o=r.parent();if(r){let e="";"searching"===a.searchstatus.toLowerCase()?(s.prop("title","Searching"),s.prop("alt","Searching"),s.prop("src","images/loading16.gif"),n(r),t=a.searchstatus):"queued"===a.searchstatus.toLowerCase()?(s.prop("title","Queued"),s.prop("alt","queued"),s.prop("src","images/queued.png"),n(r),t=a.searchstatus):"finished"===a.searchstatus.toLowerCase()&&(s.prop("title","Searching"),s.prop("alt","searching"),s.parent().prop("class","epRetry"),s.prop("src","images/search16.png"),i(r),e=/(\w+(\s\((\bBest\b|\bProper\b)\))?)\s\((.+?)\)/,t=a.status.replace(e,'$1 <span class="quality '+a.quality+'">$4</span>'),o.closest("tr").prop("class",a.overview+" season-"+a.season+" seasonstyle")),o.siblings(".col-status").html(t)}const c=$("a[id=forceUpdate-"+a.show+"x"+a.season+"x"+a.episode+"]"),l=c.children("img");c&&("searching"===a.searchstatus.toLowerCase()?(l.prop("title","Searching"),l.prop("alt","Searching"),l.prop("src","images/loading16.gif"),n(c)):"queued"===a.searchstatus.toLowerCase()?(l.prop("title","Queued"),l.prop("alt","queued"),l.prop("src","images/queued.png")):"finished"===a.searchstatus.toLowerCase()&&(l.prop("title","Forced Search"),l.prop("alt","[search]"),l.prop("src","images/search16.png"),"snatched"===a.overview.toLowerCase()?c.closest("tr").remove():i(c)))})})(e)})};$(document).ready(()=>c()),$.ajaxEpSearch=function(e){e=$.extend({},{size:16,colorRow:!1,loadingImage:"loading16.gif",queuedImage:"queued.png",noImage:"no16.png",yesImage:"yes16.png"},e),$(".epRetry").on("click",function(e){if(e.preventDefault(),"0"===$(this).prop("enableClick"))return!1;o=$(this),$("#forcedSearchModalFailed").modal("show")});const a=()=>{const a=o.parent();let t,i,c;const l=o,p=o.children("img");p.prop("title","loading"),p.prop("alt",""),p.prop("src","images/"+e.loadingImage);let d=o.prop("href");return r||(d=d.replace("retryEpisode","searchEpisode")),s&&d.indexOf("retryEpisode")>=0&&(d+="&down_cur_quality=1"),$.getJSON(d,r=>{if("failure"===r.result.toLowerCase())t=e.noImage,i="failed";else{t=e.loadingImage,i="success",e.colorRow&&a.parent().removeClass("skipped wanted qual good unaired").addClass("snatched");c=r.result.replace(/(\w+)\s\((.+?)\)/,'$1 <span class="quality '+r.quality+'">$2</span>'),a.siblings(".col-status").html(c),n(l)}p.prop("title",i),p.prop("alt",i),p.prop("height",e.size),p.prop("src","images/"+t)}),!1};$(".epSearch").on("click",function(e){if(e.preventDefault(),"0"===$(this).prop("enableClick"))return!1;o=$(this),$(this).parent().parent().children(".col-status").children(".quality").length>0?$("#forcedSearchModalQuality").modal("show"):a()}),$(".epManualSearch").on("click",function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;$(".epManualSearch").addClass("disabled"),$(".epManualSearch").fadeTo(1,.1);const a=this.href;e.shiftKey||e.ctrlKey||2===e.which?window.open(a,"_blank"):window.location=a}),$("#forcedSearchModalFailed .btn").on("click",function(){r="yes"===$(this).text().toLowerCase(),$("#forcedSearchModalQuality").modal("show")}),$("#forcedSearchModalQuality .btn").on("click",function(){s="yes"===$(this).text().toLowerCase(),a()})}},{}]},{},[1]);
//# sourceMappingURL=ajax-episode-search.js.map
